{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import  axios from \"axios\";\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport default async function getImagesByQuery(query, page) {\n\n  const reply = await axios.get('/api/', {\n    params: {\n      key: '41896213-148f054eadfc6d224b6c8f8ef',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      page: page,\n      per_page: 15,\n      safesearch: true,\n    },\n  });\n\n  return reply.data;\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryItem = new SimpleLightbox('.gallery a', {\n  animationSpeed: 350,\n  captionsData: 'alt',\n  captionDelay: 150,\n  widthRatio: 0.9,\n});\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      image => `<li class=\"gallery-item\">\n      <a href=\"${image.largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n        <ul class=\"photo-details\">\n          <li>\n            <p>Likes</p>\n            <p>${image.likes}</p>\n          </li>\n          <li>\n            <p>Views</p>\n            <p>${image.views}</p>\n          </li>\n          <li>\n            <p>Comments</p>\n            <p>${image.comments}</p>\n          </li>\n          <li>\n            <p>Downloads</p>\n            <p>${image.downloads}</p>\n          </li>\n        </ul>\n      </a>\n    </li>`\n    )\n    .join('');\n\n  document.querySelector('ul.gallery').insertAdjacentHTML('beforeend', markup);\n  galleryItem.refresh();\n}\n\nexport function clearGallery() {\n  document.querySelector('ul.gallery').innerHTML = '';\n}\n\nexport function showLoader() {\n  document.querySelector('.loader').classList.add('js-loader');\n}\n\nexport function hideLoader() {\n  document.querySelector('.loader').classList.remove('js-loader');\n}\n\nexport function showLoadMoreButton() {\n  document.querySelector('.js-load-more').classList.add('load-more-btn');\n}\n\nexport function hideLoadMoreButton() {\n  document.querySelector('.js-load-more').classList.remove('load-more-btn');\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'modern-normalize/modern-normalize.css';\nimport getImagesByQuery from './js/pixabay-api';\nimport * as rendered from './js/render-functions';\n\nconst perPage = 15; \nconst form = document.querySelector(\".form\");\nconst loadMoreBtn = document.querySelector(\".js-load-more\");\n\nlet meaning = \"\";\nlet currentPage = 1;\nlet totalHits = 0;\n\nform.addEventListener(\"submit\", async e => {\n  e.preventDefault();\n\n  meaning = form.elements[\"search-text\"].value.trim();\n  currentPage = 1;\n  rendered.clearGallery();\n  rendered.hideLoadMoreButton();\n\n  if (!meaning) {\n    return iziToast.warning({\n      backgroundColor: \"orange\",\n      message: \"Please enter something to search.\",\n      position: \"topLeft\"\n    });\n  }\n\n  rendered.showLoader();\n\n  try {\n    const reply = await getImagesByQuery(meaning, currentPage);\n    rendered.hideLoader();\n    totalHits = reply.totalHits;\n\n    if (reply.hits.length === 0) {\n      return iziToast.error({\n        backgroundColor: \"#ef4040\",\n        message: \"Sorry, no images found.\",\n        position: \"topRight\"\n      });\n    }\n\n    rendered.createGallery(reply.hits);\n\n   \n    if (totalHits > perPage) {\n      rendered.showLoadMoreButton();\n    } else {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: \"bottomCenter\"\n      });\n    }\n  } catch (error) {\n    console.log(error);\n    rendered.hideLoader();\n  }\n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n  currentPage += 1;\n  rendered.showLoader();\n\n  try {\n    const reply = await getImagesByQuery(meaning, currentPage);\n    rendered.hideLoader();\n    rendered.createGallery(reply.hits);\n\n   \n    const { height: cardHeight } = document\n      .querySelector(\".gallery\")\n      .firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: \"smooth\",\n    });\n\n  if (currentPage * perPage >= totalHits) {\n      rendered.hideLoadMoreButton();\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: \"bottomCenter\"\n      });\n    }\n  } catch (error) {\n    console.log(error);\n    rendered.hideLoader();\n  }\n});\n"],"names":["axios","getImagesByQuery","query","page","galleryItem","SimpleLightbox","createGallery","images","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","perPage","form","loadMoreBtn","meaning","currentPage","totalHits","e","rendered.clearGallery","rendered.hideLoadMoreButton","iziToast","rendered.showLoader","reply","rendered.hideLoader","rendered.createGallery","rendered.showLoadMoreButton","error","cardHeight"],"mappings":"owBACAA,EAAM,SAAS,QAAU,sBAEV,eAAeC,EAAiBC,EAAOC,EAAM,CAc1D,OAZc,MAAMH,EAAM,IAAI,QAAS,CACrC,OAAQ,CACN,IAAK,qCACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,KAAMC,EACN,SAAU,GACV,WAAY,EACb,CACL,CAAG,GAEY,IACf,CCfA,MAAMC,EAAc,IAAIC,EAAe,aAAc,CACnD,eAAgB,IAChB,aAAc,MACd,aAAc,IACd,WAAY,EACd,CAAC,EACM,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAASD,EACZ,IACCE,GAAS;AAAA,iBACEA,EAAM,aAAa;AAAA,0CACMA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,iBAI/DA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,iBAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,iBAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,iBAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,UAK3B,EACA,KAAK,EAAE,EAEV,SAAS,cAAc,YAAY,EAAE,mBAAmB,YAAaD,CAAM,EAC3EJ,EAAY,QAAO,CACrB,CAEO,SAASM,GAAe,CAC7B,SAAS,cAAc,YAAY,EAAE,UAAY,EACnD,CAEO,SAASC,GAAa,CAC3B,SAAS,cAAc,SAAS,EAAE,UAAU,IAAI,WAAW,CAC7D,CAEO,SAASC,GAAa,CAC3B,SAAS,cAAc,SAAS,EAAE,UAAU,OAAO,WAAW,CAChE,CAEO,SAASC,GAAqB,CACnC,SAAS,cAAc,eAAe,EAAE,UAAU,IAAI,eAAe,CACvE,CAEO,SAASC,GAAqB,CACnC,SAAS,cAAc,eAAe,EAAE,UAAU,OAAO,eAAe,CAC1E,CCtDA,MAAMC,EAAU,GACVC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAc,SAAS,cAAc,eAAe,EAE1D,IAAIC,EAAU,GACVC,EAAc,EACdC,EAAY,EAEhBJ,EAAK,iBAAiB,SAAU,MAAMK,GAAK,CAQzC,GAPAA,EAAE,eAAc,EAEhBH,EAAUF,EAAK,SAAS,aAAa,EAAE,MAAM,OAC7CG,EAAc,EACdG,IACAC,IAEI,CAACL,EACH,OAAOM,EAAS,QAAQ,CACtB,gBAAiB,SACjB,QAAS,oCACT,SAAU,SAChB,CAAK,EAGHC,IAEA,GAAI,CACF,MAAMC,EAAQ,MAAMzB,EAAiBiB,EAASC,CAAW,EAIzD,GAHAQ,IACAP,EAAYM,EAAM,UAEdA,EAAM,KAAK,SAAW,EACxB,OAAOF,EAAS,MAAM,CACpB,gBAAiB,UACjB,QAAS,0BACT,SAAU,UAClB,CAAO,EAGHI,EAAuBF,EAAM,IAAI,EAG7BN,EAAYL,EACdc,IAEAL,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,cAClB,CAAO,CAEJ,OAAQM,EAAO,CACd,QAAQ,IAAIA,CAAK,EACjBH,GACD,CACH,CAAC,EAEDV,EAAY,iBAAiB,QAAS,SAAY,CAChDE,GAAe,EACfM,IAEA,GAAI,CACF,MAAMC,EAAQ,MAAMzB,EAAiBiB,EAASC,CAAW,EACzDQ,IACAC,EAAuBF,EAAM,IAAI,EAGjC,KAAM,CAAE,OAAQK,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAE1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,EAECZ,EAAcJ,GAAWK,IACzBG,IACAC,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,cAClB,CAAO,EAEJ,OAAQM,EAAO,CACd,QAAQ,IAAIA,CAAK,EACjBH,GACD,CACH,CAAC"}