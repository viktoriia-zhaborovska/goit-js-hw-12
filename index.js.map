{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import  axios from \"axios\";\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport default async function getImagesByQuery(query, page) {\n\n  const reply = await axios.get('/api/', {\n    params: {\n      key: '41896213-148f054eadfc6d224b6c8f8ef',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      page: page,\n      per_page: 15,\n      safesearch: true,\n    },\n  });\n\n  return reply.data;\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryItem = new SimpleLightbox('.gallery a', {\n  animationSpeed: 350,\n  captionsData: 'alt',\n  captionDelay: 150,\n  widthRatio: 0.9,\n});\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      image => `<li class=\"gallery-item\">\n      <a href=\"${image.largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n        <ul class=\"photo-details\">\n          <li>\n            <p>Likes</p>\n            <p>${image.likes}</p>\n          </li>\n          <li>\n            <p>Views</p>\n            <p>${image.views}</p>\n          </li>\n          <li>\n            <p>Comments</p>\n            <p>${image.comments}</p>\n          </li>\n          <li>\n            <p>Downloads</p>\n            <p>${image.downloads}</p>\n          </li>\n        </ul>\n      </a>\n    </li>`\n    )\n    .join('');\n\n  document.querySelector('ul.gallery').insertAdjacentHTML('beforeend', markup);\n  galleryItem.refresh();\n}\n\nexport function clearGallery() {\n  document.querySelector('ul.gallery').innerHTML = '';\n}\n\nexport function showLoader() {\n  document.querySelector('.loader').classList.add('js-loader');\n}\n\nexport function hideLoader() {\n  document.querySelector('.loader').classList.remove('js-loader');\n}\n\nexport function showLoadMoreButton() {\n  document.querySelector('.js-load-more').classList.add('load-more-btn');\n}\n\nexport function hideLoadMoreButton() {\n  document.querySelector('.js-load-more').classList.remove('load-more-btn');\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'modern-normalize/modern-normalize.css';\nimport getImagesByQuery from './js/pixabay-api';\nimport * as rendered from './js/render-functions';\n\nconst closeSVGLink = new URL('./img/x-octagon.svg', import.meta.url).href;\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.js-load-more');\n\nlet meaning = '';\nlet page = 1;\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n  meaning = form.elements['search-text'].value.trim();\n  if (!meaning) {\n    return iziToast.warning({\n      backgroundColor: 'orange',\n      message: 'Please enter a search term!',\n      messageColor: '#fafafa',\n      position: 'topLeft',\n    });\n  }\n\n  page = 1;\n  rendered.clearGallery();\n  rendered.hideLoadMoreButton();\n  rendered.showLoader();\n\n  getImagesByQuery(meaning, page)\n    .then(reply => {\n      rendered.hideLoader();\n      form.elements['search-text'].value = '';\n      if (reply.hits.length === 0) {\n        return iziToast.error({\n          backgroundColor: '#ef4040',\n          class: 'error-message',\n          message: 'No images found for your query.',\n          messageColor: '#fafafb',\n          iconUrl: closeSVGLink,\n        });\n      }\n\n      rendered.createGallery(reply.hits);\n\n      if (reply.totalHits > page * 15) {\n        rendered.showLoadMoreButton();\n      }\n    })\n    .catch(error => console.log(error));\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  page += 1;\n  rendered.hideLoadMoreButton();\n  rendered.showLoader();\n\n  try {\n    const reply = await getImagesByQuery(meaning, page);\n    rendered.hideLoader();\n\n    rendered.createGallery(reply.hits);\n\n    if (reply.totalHits > page * 15) {\n      rendered.showLoadMoreButton();\n    } else {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    rendered.hideLoader();\n    console.log(error);\n  }\n});\n"],"names":["axios","getImagesByQuery","query","page","galleryItem","SimpleLightbox","createGallery","images","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","closeSVGLink","form","loadMoreBtn","meaning","e","iziToast","rendered.clearGallery","rendered.hideLoadMoreButton","rendered.showLoader","reply","rendered.hideLoader","rendered.createGallery","rendered.showLoadMoreButton","error"],"mappings":"owBACAA,EAAM,SAAS,QAAU,sBAEV,eAAeC,EAAiBC,EAAOC,EAAM,CAc1D,OAZc,MAAMH,EAAM,IAAI,QAAS,CACrC,OAAQ,CACN,IAAK,qCACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,KAAMC,EACN,SAAU,GACV,WAAY,EACb,CACL,CAAG,GAEY,IACf,CCfA,MAAMC,EAAc,IAAIC,EAAe,aAAc,CACnD,eAAgB,IAChB,aAAc,MACd,aAAc,IACd,WAAY,EACd,CAAC,EACM,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAASD,EACZ,IACCE,GAAS;AAAA,iBACEA,EAAM,aAAa;AAAA,0CACMA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,iBAI/DA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,iBAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,iBAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,iBAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,UAK3B,EACA,KAAK,EAAE,EAEV,SAAS,cAAc,YAAY,EAAE,mBAAmB,YAAaD,CAAM,EAC3EJ,EAAY,QAAO,CACrB,CAEO,SAASM,GAAe,CAC7B,SAAS,cAAc,YAAY,EAAE,UAAY,EACnD,CAEO,SAASC,GAAa,CAC3B,SAAS,cAAc,SAAS,EAAE,UAAU,IAAI,WAAW,CAC7D,CAEO,SAASC,GAAa,CAC3B,SAAS,cAAc,SAAS,EAAE,UAAU,OAAO,WAAW,CAChE,CAEO,SAASC,GAAqB,CACnC,SAAS,cAAc,eAAe,EAAE,UAAU,IAAI,eAAe,CACvE,CAEO,SAASC,GAAqB,CACnC,SAAS,cAAc,eAAe,EAAE,UAAU,OAAO,eAAe,CAC1E,CCtDA,MAAMC,EAAe,IAA+C,IAAA,sBAAA,YAAA,GAAA,EAAC,KAC/DC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAc,SAAS,cAAc,eAAe,EAE1D,IAAIC,EAAU,GACVf,EAAO,EAEXa,EAAK,iBAAiB,SAAUG,GAAK,CAGnC,GAFAA,EAAE,eAAc,EAChBD,EAAUF,EAAK,SAAS,aAAa,EAAE,MAAM,OACzC,CAACE,EACH,OAAOE,EAAS,QAAQ,CACtB,gBAAiB,SACjB,QAAS,8BACT,aAAc,UACd,SAAU,SAChB,CAAK,EAGHjB,EAAO,EACPkB,IACAC,IACAC,IAEAtB,EAAiBiB,EAASf,CAAI,EAC3B,KAAKqB,GAAS,CAGb,GAFAC,IACAT,EAAK,SAAS,aAAa,EAAE,MAAQ,GACjCQ,EAAM,KAAK,SAAW,EACxB,OAAOJ,EAAS,MAAM,CACpB,gBAAiB,UACjB,MAAO,gBACP,QAAS,kCACT,aAAc,UACd,QAASL,CACnB,CAAS,EAGHW,EAAuBF,EAAM,IAAI,EAE7BA,EAAM,UAAYrB,EAAO,IAC3BwB,GAER,CAAK,EACA,MAAMC,GAAS,QAAQ,IAAIA,CAAK,CAAC,CACtC,CAAC,EAEDX,EAAY,iBAAiB,QAAS,SAAY,CAChDd,GAAQ,EACRmB,IACAC,IAEA,GAAI,CACF,MAAMC,EAAQ,MAAMvB,EAAiBiB,EAASf,CAAI,EAClDsB,IAEAC,EAAuBF,EAAM,IAAI,EAE7BA,EAAM,UAAYrB,EAAO,GAC3BwB,IAEAP,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAClB,CAAO,CAEJ,OAAQQ,EAAO,CACdH,IACA,QAAQ,IAAIG,CAAK,CAClB,CACH,CAAC"}